<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>蠢く！うごめくん</title>
    <link href="ugomekun.css" rel="stylesheet" type="text/css">
    <link href="ugomekun.gif" rel="icon" type="image/gif">
</head>

<body>
    <header>
    </header>
    <main>
        <div class="ugomekun">
            <img src="ugomekun.gif" alt="うごめくん" id="ugomekun">
        </div>
    </main>
    <footer>
    </footer>
    <script>
        class Position {
            constructor(ugomekun) {
                this.x = 145
                this.y = 200
                this.ugomekun = ugomekun
                this.ugomekun.style.top = this.y + 'px'
                this.ugomekun.style.left = this.x + 'px'
            }
            add(x, y) {
                this.x += x
                this.y += y
                this.ugomekun.style.left = this.x + 'px'
                this.ugomekun.style.top = this.y + 'px'
            }
        }

        let messege = 'てすと'
        messege += 123
        messege = 100
        messege += '123'
        console.log(messege)

        let ugomekun = document.getElementById('ugomekun')

        let position = new Position(ugomekun)

        let intervalId

        let counter = 0

        window.addEventListener('keydown', function (event) {
            console.log('おした')
            console.log(event.key)
            if (event.key === 'ArrowRight') {
                position.add(10, 0)
            }
            if (event.key === 'ArrowDown') {
                position.add(0, 10)
            }
            if (event.key === 'ArrowLeft') {
                position.add(-10, 0)
            }
            if (event.key === 'ArrowUp') {
                position.add(0, -10)
            }

            if (event.key === 'c') {
                if (intervalId) {
                    return
                }
                // 右にぬるぬる10コマ分動く
                intervalId = setInterval(function () {
                    position.add(10, 0)
                    counter += 1
                    if (counter === 10) {
                        clearInterval(intervalId)
                        counter = 0
                        intervalId = 0
                    }
                }, 1000 / 7);
            }

            if (event.key === 'v') {
                clearInterval(intervalId)
            }

            if (event.key === 'ArrowLeft') {
                ugomekun.classList.remove('flip-horizontal')
            }
            if (event.key === 'ArrowRight') {
                ugomekun.classList.add('flip-horizontal')
            }
        })

    </script>
</body>

</html>